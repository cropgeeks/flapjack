<?xml version="1.0"?>
<!DOCTYPE mapping PUBLIC "-//EXOLAB/Castor Mapping DTD Version 1.0//EN"
                         "http://castor.org/mapping.dtd">

<mapping>

	<class name="flapjack.data.XMLRoot" identity="guid">
		<field name="guid" type="string">
			<bind-xml node="attribute"/>
		</field>
	</class>

	<!-- Project -->
	<class name="flapjack.data.Project" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="dataSets" type="flapjack.data.DataSet" collection="vector"/>
	</class>

	<!-- DataSet -->
	<class name="flapjack.data.DataSet" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="chromosomeMaps" type="flapjack.data.ChromosomeMap" collection="vector"/>
		<field name="lines" type="flapjack.data.Line" collection="vector"/>
		<field name="viewSets" type="flapjack.data.GTViewSet" collection="vector"/>
	</class>

	<!-- ChromosomeMap -->
	<class name="flapjack.data.ChromosomeMap" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="name" type="string">
			<bind-xml node="attribute"/>
		</field>
		<field name="markers" type="flapjack.data.Marker" collection="vector"/>
	</class>

	<!-- Marker -->
	<class name="flapjack.data.Marker" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="name" type="string">
			<bind-xml node="attribute"/>
		</field>
		<field name="frequencies" type="float" collection="array"/>
	</class>

	<!-- Line -->
	<class name="flapjack.data.Line" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="name" type="string">
			<bind-xml node="attribute"/>
		</field>
		<field name="genotypes" type="flapjack.data.GenotypeData" collection="vector"/>
	</class>

	<!-- GenotypeData -->
	<class name="flapjack.data.GenotypeData" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="chromosomeMap" type="flapjack.data.ChromosomeMap">
			<bind-xml reference="true" node="attribute"/>
		</field>
	</class>

	<!-- StateTable -->
	<class name="flapjack.data.StateTable" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="states" type="flapjack.data.AlleleState" collection="vector"/>
	</class>

	<!-- AlleleState -->
	<class name="flapjack.data.AlleleState" extends="flapjack.data.XMLRoot" auto-complete="true"/>

	<!-- GTViewSet -->
	<class name="flapjack.data.GTViewSet" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="dataSet" type="flapjack.data.DataSet">
			<bind-xml reference="true" node="attribute"/>
		</field>
		<field name="name" type="string">
			<bind-xml node="attribute"/>
		</field>
		<field name="lines" type="flapjack.data.LineInfo" collection="vector"/>
		<field name="hideLines" type="flapjack.data.LineInfo" collection="vector"/>
		<field name="views" type="flapjack.data.GTView" collection="vector"/>
		<field name="comparisonLine" type="flapjack.data.Line">
			<bind-xml reference="true" node="attribute"/>
		</field>
		<field name="traits" type="integer" collection="array" transient="true"/>
	</class>

	<!-- GTView -->
	<class name="flapjack.data.GTView" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="viewSet" type="flapjack.data.GTViewSet">
			<bind-xml reference="true" node="attribute"/>
		</field>
		<field name="chromosomeMap" type="flapjack.data.ChromosomeMap">
			<bind-xml reference="true" node="attribute"/>
		</field>
		<field name="markers" type="flapjack.data.MarkerInfo" collection="vector"/>
		<field name="hideMarkers" type="flapjack.data.MarkerInfo" collection="vector"/>
		<field name="comparisonMarker" type="flapjack.data.Marker">
			<bind-xml reference="true" node="attribute"/>
		</field>
	</class>

	<!-- LineInfo -->
	<class name="flapjack.data.LineInfo" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="line" type="flapjack.data.Line">
			<bind-xml reference="true" node="attribute"/>
		</field>
	</class>

	<!-- MarkerInfo -->
	<class name="flapjack.data.MarkerInfo" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="marker" type="flapjack.data.Marker">
			<bind-xml reference="true" node="attribute"/>
		</field>
	</class>

	<!-- Trait -->
	<class name="flapjack.data.Trait" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="name" type="string">
			<bind-xml node="attribute"/>
		</field>
		<field name="categories" type="string" collection="vector"/>
	</class>

	<!-- TraitValue -->
	<class name="flapjack.data.TraitValue" extends="flapjack.data.XMLRoot" auto-complete="true">
		<field name="trait" type="flapjack.data.Trait">
			<bind-xml reference="true" node="attribute"/>
		</field>
	</class>

</mapping>